{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Generador de Modelos · Calidad del Aire</title>

    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
    />
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
        rel="stylesheet"
    />

    <link href="{% static 'styles/styles.css' %}" rel="stylesheet" />
</head>
<body>
    
    {% include 'partials/navbar/navbar.html' %}

    <div class="content">
        <header
            class="py-5 mb-5 border-bottom text-center"
            style="border-color: #f2ead3 !important"
        >
            <div class="mx-auto" style="max-width: 800px">
                <span
                    class="nk-subtle text-uppercase fw-semibold mb-2 d-block tracking-widest"
                    style="font-family: 'Inter', sans-serif; color: #344f1f !important"
                >
                    Acción Requerida
                </span>
                <h1
                    class="display-3 fw-bolder mb-3"
                    style="font-family: 'Inter', sans-serif; letter-spacing: -2px"
                >
                    Generador de Modelos
                </h1>
                <p
                    class="lead text-muted mx-auto"
                    style="
                        max-width: 600px;
                        font-size: 1.25rem;
                        font-family: 'Inter', sans-serif;
                        color: #344f1f !important;
                    "
                >
                    Esta herramienta ejecuta el script de Machine Learning para
                    generar un nuevo archivo CSV de predicciones y actualizar
                    las métricas del modelo.
                </p>
            </div>
        </header>

        <section class="mb-5">
            <div class="mx-auto" style="max-width: 800px">

                {% if mensaje %}
                <div class="alert alert-{{ clase }} mb-4" role="alert" style="background-color: #F2EAD3; border-color: #547792; color: #344F1F;">
                    {{ mensaje }} 
                    {% if clase == 'success' %}
                    <a href="{% url 'resumen' %}" class="alert-link fw-bold ms-3">Ver nuevos resultados</a>
                    {% endif %}
                </div>
                {% endif %}

                <div
                    class="card p-4 p-md-5 border rounded-lg shadow-sm"
                    style="background-color: #f9f5f0; border-color: #f2ead3"
                >
                    <h5 class="card-title fw-bold fs-3 mb-3" style="color: #344f1f;">Configuración de Ejecución</h5>
                    
                    <form method="post" action="{% url 'generador' %}">
                        {% csrf_token %}

                        <div class="mb-3">
                            <label for="target_select" class="form-label fs-5" style="color: #344F1F;">Variable Objetivo (TARGET)</label>
                            <select class="form-select form-select-lg" id="target_select" name="target">
                                <option value="PM2_5" selected>PM2.5</option>
                                <option value="CO2">CO₂</option>
                            </select>
                            <div class="form-text mt-2" style="color: #344F1F;">
                                Esto define qué variable se modelará y qué archivos de salida se generarán.
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary btn-lg rounded-pill mt-4 px-4 py-2">
                            <i class="bi bi-play-circle-fill me-2"></i>
                            Generar Nuevas Predicciones
                        </button>
                    </form>

                    <div class="nk-subtle mt-4 pt-3 border-top" style="border-color: #f2ead3 !important;">
                        <small style="color: #344f1f !important;">
                            El comando tomará unos segundos en procesar los datos y guardar el CSV y el PNG en la carpeta de salidas.
                        </small>
                    </div>
                </div>

            </div>
        </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    </body>
</html>