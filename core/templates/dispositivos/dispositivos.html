{% load static %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Dashboard Dispositivo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="{% static 'styles/styles.css' %}" rel="stylesheet" />
  </head>
  <body>
    {% include 'partials/navbar/navbar.html' %}
    <div class="content">
      <h2 class="mb-4 text-center">Dispositivo: Sensor 1</h2>

      <div class="mb-3 text-center">
        <select class="form-select w-50 d-inline-block">
          <option selected>Seleccionar dispositivo</option>
          <option>Sensor 1</option>
          <option>Sensor 2</option>
        </select>
      </div>

      <div class="main-grid">
        <div id="map"></div>

        <div>
          <div class="row g-3">
            <div class="col-6">
              <div class="data-card">
                <h5>PM2.5</h5>
                <p>15 µg/m³</p>
              </div>
            </div>
            <div class="col-6">
              <div class="data-card">
                <h5>PM10</h5>
                <p>30 µg/m³</p>
              </div>
            </div>
            <div class="col-6">
              <div class="data-card">
                <h5>CO₂</h5>
                <p>420 ppm</p>
              </div>
            </div>
            <div class="col-6">
              <div class="data-card">
                <h5>Temperatura</h5>
                <p>24 °C</p>
              </div>
            </div>
            <div class="col-6">
              <div class="data-card">
                <h5>Humedad</h5>
                <p>65 %</p>
              </div>
            </div>
            <div class="col-6">
              <div class="data-card">
                <h5>Luz</h5>
                <p>120 lx</p>
              </div>
            </div>
          </div>

          <div class="semaforo-card-container mt-3">
            <div class="semaforo-card">
              <div class="semaforo-status">
                <span class="semaforo-indicator indicator-green"></span>
                <div class="text-start">
                  <p class="m-0 text-dark">Calidad del Aire: **BUENA**</p>
                  <p class="m-0 semaforo-recomendacion">
                    Recomendación: ¡Disfruta de las actividades al aire libre!
                  </p>
                </div>
              </div>
              <div class="text-end">
                <p class="m-0 text-dark">PM2.5 Actual</p>
                <p class="m-0 text-dark" style="font-size: 1.8rem">15 µg/m³</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="filters mt-4">
        <select class="form-select">
          <option selected>Variable</option>
          <option>PM2.5</option>
          <option>PM10</option>
          <option>CO₂</option>
          <option>Temperatura</option>
          <option>Humedad</option>
          <option>Luz</option>
        </select>
        <select class="form-select">
          <option selected>Rango de tiempo</option>
          <option>1 hora</option>
          <option>6 horas</option>
          <option>12 horas</option>
          <option>1 día</option>
          <option>7 días</option>
          <option>14 días</option>
          <option>1 mes</option>
        </select>
      </div>

      <div class="chart-container">
        <canvas id="chartExample"></canvas>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
      const map = L.map("map").setView([19.4326, -99.1332], 13);
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "© OpenStreetMap",
      }).addTo(map);
      L.marker([19.4326, -99.1332]).addTo(map).bindPopup("Sensor Ejemplo");

      const ctx = document.getElementById("chartExample").getContext("2d");
      new Chart(ctx, {
        type: "line",
        data: {
          labels: ["03:00", "05:00", "07:00", "09:00", "11:00", "13:00"],
          datasets: [
            {
              label: "PM2.5",
              data: [15, 13, 14, 27, 16, 7],
              borderColor: "rgba(0,123,255,1)",
              backgroundColor: "rgba(0,123,255,0.2)",
              fill: true,
              tension: 0.3,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: true } },
          scales: { y: { beginAtZero: true } },
        },
      });
    </script>
  </body>
</html>
