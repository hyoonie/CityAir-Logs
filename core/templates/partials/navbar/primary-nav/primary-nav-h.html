{% load static %}
<nav class="cityair-navbar">
    <div class="nav-links">
        <a href="{% url 'home' %}" class="nav-item">
            <i class="bi bi-house"></i> <span>Inicio</span>
        </a>
        <a href="{% url 'sobre-nosotros' %}" class="nav-item">
            <i class="bi bi-info-circle"></i> <span>Sobre Nosotros</span>
        </a>
        <a href="{% url 'reportes' %}" class="nav-item">
            <i class="bi bi-clipboard"></i> <span>Datos</span>
        </a>
        <a href="{% url 'analisis-de-datos' %}" class="nav-item">
            <i class="bi bi-graph-up"></i> <span>Análisis</span>
        </a>
        <a href="{% url 'dispositivos' %}" class="nav-item">
            <i class="bi bi-bar-chart"></i> <span>Dispositivos</span>
        </a>

        {# --- LOGICA DE PREDICCIONES --- #}
        {% if user.is_authenticated %}
            {# OPCIÓN A: Usuario Logueado -> Acceso Normal #}
            <a href="{% url 'analisis-predictivo' %}" class="nav-item">
                <i class="bi bi-magic"></i> <span>Predicciones</span>
            </a>
        {% else %}
            {# OPCIÓN B: Usuario Anónimo -> Alerta JS #}
            <a href="#" class="nav-item" onclick="alert('Acceso Restringido.\n\nEl módulo de Predicciones está disponible por tiempo limitado solo para usuarios registrados.\n\nPor favor, inicia sesión para acceder.'); return false;">
                <i class="bi bi-magic"></i> <span>Predicciones</span>
                {# Icono de candado pequeño opcional para indicar bloqueo visualmente #}
                <i class="bi bi-lock-fill ms-1" style="font-size: 0.7em; opacity: 0.7;"></i>
            </a>
        {% endif %}
        {# --- FIN LOGICA --- #}

        {% if user.rol == "Administrador del sistema" or user.is_staff %}
            <a href="/admin/" class="nav-item" target="_blank">
                <i class="bi bi-shield-lock-fill"></i> <span>Administración</span>
            </a>
        {% endif %}
    </div>

    <div class="nav-user d-flex align-items-center">
        {% if user.is_authenticated %}
            
            <span class="d-flex align-items-center me-4 text-white">
                <i class="bi bi-person-check-fill me-2 fs-5"></i>
                <span class="fw-semibold">Hola, {{ user.usuario }}</span>
            </span>
            <a href="{% url 'configuracion' user.id %}" class="nav-item" title="Configuración">
                <i class="bi bi-gear"></i>
            </a>

            <form action="{% url 'logout' %}" method="post" class="d-flex align-items-center">
                {% csrf_token %}
                <button type="submit" class="nav-item logout-btn" title="Cerrar Sesión" style="background:none; border:none; cursor:pointer;">
                    <i class="bi bi-box-arrow-right"></i>
                </button>
            </form>

        {% else %}
            <a href="{% url 'login' %}" class="nav-item" title="Iniciar Sesión">
                <i class="bi bi-person-circle"></i>
            </a>
        {% endif %}
    </div>
</nav>